<h1 class="mb-3">Chat with <%= @chatroom.interlocutor_of(current_user).username %></h1>
<div data-controller="chatroom-subscription"
  data-chatroom-subscription-chatroom-id-value="<%= @chatroom.id %>"
  data-chatroom-subscription-user-id-value="<%= current_user.id %>">
  <div class="card msg">
    <div class="card-body chatroom" data-chatroom-subscription-target="messages">
    <% @chatroom.messages.each do |message| %>
      <%= render 'messages/message', message: message %>
    <% end %>
    </div>
  </div>
  <%= simple_form_for [@chatroom, @message],
    html: {
      class: 'input-group',
      data: {
        action: "turbo:submit-end->chatroom-subscription#resetForm"
      }
    } do |f| %>
      <%= f.input :content,
        as: :string,
        label: false,
        placeholder: 'Doodoo...',
        wrapper_html: { class: 'form-outline flex-grow-1' },
        input_html: { class: 'form-control' } %>
      <%= f.submit "Send", class: 'btn btn-primary-light mb-3' %>
    <% end %>
</div>
